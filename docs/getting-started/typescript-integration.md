---
id: typescript-integration
title: TypeScript
---

In a project that includes both TypeScript and Stylable, TypeScript has no way of knowing what is inside an `*.st.css` file, and so whenever a TypeScript file imports a Stylable stylesheet you must provide a type for it.

```ts title="Import example"
import { classes } from './button.st.css'; // requires typings
```

<!-- ## Define stylesheet types -->

## Generating type per stylesheet

Stylable can generate a declaration file for each stylesheet. This approach has the advantage of providing exact typing information for each individual [stylesheet runtime API](../references/runtime.md).

### Generated files

Stylable generates two kinds of type related files:

- `*.d.ts` provide typing for the stylesheet runtime API
- `*.d.ts.map` provide mapping from the generated `.d.ts` file to the original `.st.css` stylesheet. This allows jumping to definition in the original source straight from the TypeScript file.

Type definitions that are generated adjacent to the stylesheet would be automatically detected and used by TypeScript. However, this can cause bloat in the project source files.

To prevent clutter in your project, we recommend that you generate all stylesheet typings to a single directory.

```
/* type files grouped in st-types folder */
 ├── src
 |  ├── button.st.css           - source stylesheet
 |  └── button.tsx              - component file
 |
 └── st-types
    ├── button.st.css.d.ts      - type definition
    └── button.st.css.d.ts.map  - type definition source-map
```

You'll then need to configure TypeScript to use that directory. To do so, modify your `tsconfig.json` to specify two `rootDirs`: your source files, and the generated typings (learn more about this by reading the [`tsconfig.json` documentation](https://www.typescriptlang.org/tsconfig#rootDirs)):

```jsonc title="tsconfig.json"
{
  "compilerOptions": {
    "rootDirs": ["./src", "./st-types"]
  }
}
```

:::tip
We recommend adding the generated `*.st.css.d.ts` and `*.st.css.d.ts.map` files to your `.gitignore` file, and to only include them in your published packages.
:::

### Using the CLI

To generate type definition files to the `st-types` directory using the [`stc` CLI](https://github.com/wix/stylable/tree/master/packages/cli#cli-arguments), provide it with the `--srcDir`, `--outDir` and `--dts` flags:

```sh
stc --srcDir="src" --outDir="st-types" --dts
```

Source maps are generated by default when generating `.d.ts` files. If these are not wanted, the `--dtsSourceMap` flag should be set to `false`.

:::tip
Use [`stylable.config.js`](https://github.com/wix/stylable/tree/master/packages/cli#configuration-file) as a central location to share common Stylable configurations across tools and integrations.
:::

### Using an existing build flow

For projects that are already using one of our bundler integrations ([webpack](./webpack-integration) or [rollup](./rollup-integration)), you can configure the Stylable plugin to auto-generate types per stylesheet. This means that as you are working in your normal development flows, types will be updated in the background, and be available in your IDE.

This functionality is dependant on a [`stylable.config.js`](https://github.com/wix/stylable/tree/master/packages/cli#configuration-file) file that includes configuration for generating `.d.ts` files.

```js title="stylable.config.js"
//@ts-check
const { typedConfiguration } = require('@stylable/cli');

exports.stcConfig = typedConfiguration({
  options: {
    srcDir: './src',
    outDir: './st-types',
    dts: true,
  },
});
```

To activate this functionality in the bundler, configure the Stylable plugin with `{ stcConfig: true }`.

<!-- prettier-ignore-end -->

<!-- TODO: webpack and rollup should reference stc config themselves, and be referenced here -->

```js
// create a webpack plugin instance
new StylableWebpackPlugin({ stcConfig: true });

// create a rollup plugin instance
stylableRollupPlugin({ stcConfig: true });
```

## Global definition

If you choose not to generate `.d.ts` typings for each stylesheet, then it is required that you include in your project a general purpose `*.st.css` global declaration. This provides a broad signature of a Stylable stylesheet.

To do this, create a `globals.d.ts` file in your `./src` directory and add the following declaration:

```ts title="globals.d.ts"
declare module '*.st.css' {
  export * from '@stylable/runtime/stylesheet';

  const defaultExport: unknown;
  export default defaultExport;
}
```

### Typing 3rd-party stylesheets

If your project generates `.d.ts` typings for each stylesheet, but a package you are consuming published `.st.css` files without typings, then you will have to declare global typings for that specific package.

```ts title="globals.d.ts"
declare module 'third-party-package/*.st.css' {
  export * from '@stylable/runtime/stylesheet';

  const defaultExport: unknown;
  export default defaultExport;
}
```

## Publishing

If you publish any `*.st.css` files in your package, you should also publish the `.d.ts` and `.d.ts.map` files adjacent to them. This practice leads to a better experience for users consuming your project.

```sh
stc --srcDir="src" --outDir="dist" --stcss --dts
```
